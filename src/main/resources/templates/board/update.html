<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<link th:href="@{/css/bootstrap.min.css}"
				href="../css/bootstrap.min.css" rel="stylesheet">
	 	<style>
			.container {
					max-width: 560px;
				}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="py-5 text-center">
		 		<h2>게시글 수정 화면</h2>
		 	</div>
		 	<form th:action="@{|/board/update/${board.id}|}" method="post" name="updateForm" id="updateForm" onsubmit="formSubmit()">
			 	<div>
				 	<label for="id">글번호</label>
				 	<input type="number" id="id" name="id" class="form-control" th:value="${board.id}" readonly>
			 	</div>
			 	<div>
			 		<label for="regName">작성자</label>
			 		<input type="text" id="regName" name="regName" class="form-control" th:value="${board.regName}" readonly>
			 	</div>	 			 	
			 	<div>
			 		<label for="regPw">비밀번호</label>
			 		<input type="text" id="regPw" name="regPw" class="form-control" required>
			 	</div>	 	
			 	<div>
			 		<label for="title">제목</label>
			 		<input type="text" id="title" name="title" class="form-control" th:value="${board.title}">
			 	</div>
			 	<div>
			 		<label for="contents">내용</label>
			 		<textarea id="contents" name="contents" class="form-control" th:value="${board.contents}"></textarea>
			 	</div>	 	
			 	<hr class="my-4">
		 		<div class="row">
		 			<div class="col">
		 				<button class="w-100 btn btn-primary btn-lg" onclick="board_update()">저장</button>
		 			</div>
		 			<div class="col">
		 				<a href="/board/list" class="w-100 btn btn-secondary btn-lg" type="button">취소</a>
		 			</div>
		 		</div>
	 		</form>	 		
		</div> 
		<script th:inline="javascript">
			const formtag = document.getElementById("updateForm");
			// 데이터 전송, 페이지 전환 방지
			function handleSubmit(event) {
			  event.preventDefault()
			  alert(1);
			}		
			// 등록
			function init() {
			  formtag.addEventListener('submit', handleSubmit)
			  alert(2);
			}
			// 페이지 이동 막기
			function formSubmit(){
				return false;
				alert(3);
			}
			const board_update = () => {
				const inputPw = document.getElementById("regPw").value;
				const dbPw = [[${board.regPw}]];
				const id = [[${board.id}]];
				if (inputPw == dbPw){
					document.updateForm.submit();
					alert("저장 되었습니다!");
				} else {
					alert("비밀번호가 일치하지 않습니다!");
					return false;
				}
		    }    
		</script>	
	</body>
</html>